(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8474:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return r.default}});var r=t(6110)},6110:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(5893);var o,i=t(655),a=t(7294),u=t(2152),s=t(2723),l=t(4273),c=t(1498),d=t(5942),p=t(2714);!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(o||(o={}));var f=new Map;function v(e){var n;switch(e){case o.Query:n="Query";break;case o.Mutation:n="Mutation";break;case o.Subscription:n="Subscription"}return n}function h(e,n){var t=function(e){var n,t,r=f.get(e);if(r)return r;__DEV__?(0,p.kG)(!!e&&!!e.kind,"Argument of ".concat(e," passed to parser was not a valid GraphQL ")+"DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document"):(0,p.kG)(!!e&&!!e.kind,30);var i=e.definitions.filter((function(e){return"FragmentDefinition"===e.kind})),a=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"query"===e.operation})),u=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})),s=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation}));__DEV__?(0,p.kG)(!i.length||a.length||u.length||s.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"):(0,p.kG)(!i.length||a.length||u.length||s.length,31),__DEV__?(0,p.kG)(a.length+u.length+s.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+"".concat(e," had ").concat(a.length," queries, ").concat(s.length," ")+"subscriptions and ".concat(u.length," mutations. ")+"You can use 'compose' to join multiple operation types to a component"):(0,p.kG)(a.length+u.length+s.length<=1,32),t=a.length?o.Query:o.Mutation,a.length||u.length||(t=o.Subscription);var l=a.length?a:u.length?u:s;__DEV__?(0,p.kG)(1===l.length,"react-apollo only supports one definition per HOC. ".concat(e," had ")+"".concat(l.length," definitions. ")+"You can use 'compose' to join multiple operation types to a component"):(0,p.kG)(1===l.length,33);var c=l[0];n=c.variableDefinitions||[];var d={name:c.name&&"Name"===c.name.kind?c.name.value:"data",type:t,variables:n};return f.set(e,d),d}(e),r=v(n),i=v(t.type);__DEV__?(0,p.kG)(t.type===n,"Running a ".concat(r," requires a graphql ")+"".concat(r,", but a ").concat(i," was used instead.")):(0,p.kG)(t.type===n,34)}function g(e,n){var t,r=(0,a.useContext)((0,l.K)()),s=function(e){var n=(0,a.useContext)((0,l.K)()),t=e||n.client;return __DEV__?(0,p.kG)(!!t,'Could not find "client" in the context or passed in as an option. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via options.'):(0,p.kG)(!!t,29),t}(null===n||void 0===n?void 0:n.client),f=s.defaultOptions.watchQuery;h(e,o.Query);var v,g=(0,a.useState)((function(){var t=b(e,n,f),o=null;return r.renderPromises&&(o=r.renderPromises.getSSRObservable(t)),o||(o=s.watchQuery(t),r.renderPromises&&r.renderPromises.registerSSRObservable(o,t)),r.renderPromises&&!1!==(null===n||void 0===n?void 0:n.ssr)&&!(null===n||void 0===n?void 0:n.skip)&&o.getCurrentResult().loading&&r.renderPromises.addQueryPromise({getOptions:function(){return b(e,n,f)},fetchData:function(){return new Promise((function(e){var n=o.subscribe({next:function(t){t.loading||(e(),n.unsubscribe())},error:function(){e(),n.unsubscribe()},complete:function(){e()}})}))}},(function(){return null})),o})),y=g[0],m=g[1],k=(0,a.useState)((function(){var e,t,r=y.getCurrentResult();return!r.loading&&n&&(r.error?null===(e=n.onError)||void 0===e||e.call(n,r.error):r.data&&(null===(t=n.onCompleted)||void 0===t||t.call(n,r.data))),r})),_=k[0],w=k[1],P=(0,a.useRef)({client:s,query:e,options:n,result:_,previousData:void 0,watchQueryOptions:b(e,n,f)});(0,a.useEffect)((function(){var t,r,o,i=b(e,n,f);if(P.current.client===s&&(0,u.D)(P.current.query,e))(0,u.D)(P.current.watchQueryOptions,i)||(y.setOptions(i).catch((function(){})),o=y.getCurrentResult(),P.current.watchQueryOptions=i);else{var a=s.watchQuery(i);m(a),o=a.getCurrentResult()}if(o){var l=P.current.result;l.data&&(P.current.previousData=l.data),w(P.current.result=o),!o.loading&&n&&(o.error?null===(t=n.onError)||void 0===t||t.call(n,o.error):o.data&&(null===(r=n.onCompleted)||void 0===r||r.call(n,o.data)))}Object.assign(P.current,{client:s,query:e})}),[y,s,e,n]),(0,a.useEffect)((function(){if(!r.renderPromises){var e=y.subscribe(n,(function t(r){var o,i,a=y.last;e.unsubscribe();try{y.resetLastResults(),e=y.subscribe(n,t)}finally{y.last=a}if(!r.hasOwnProperty("graphQLErrors"))throw r;var s=P.current.result;(s&&s.loading||!(0,u.D)(r,s.error))&&(w(P.current.result={data:s.data,error:r,loading:!1,networkStatus:d.I.error}),null===(i=null===(o=P.current.options)||void 0===o?void 0:o.onError)||void 0===i||i.call(o,r))}));return function(){return e.unsubscribe()}}function n(){var e,n,t=P.current.result,r=y.getCurrentResult();t&&t.loading===r.loading&&t.networkStatus===r.networkStatus&&(0,u.D)(t.data,r.data)||(t.data&&(P.current.previousData=t.data),w(P.current.result=r),r.loading||null===(n=null===(e=P.current.options)||void 0===e?void 0:e.onCompleted)||void 0===n||n.call(e,r.data))}}),[y,r.renderPromises,s.disableNetworkFetches]),v=(t=_).partial,_=(0,i._T)(t,["partial"]),!v||!(null===n||void 0===n?void 0:n.partialRefetch)||_.loading||_.data&&0!==Object.keys(_.data).length||"cache-only"===y.options.fetchPolicy||(_=(0,i.pi)((0,i.pi)({},_),{loading:!0,networkStatus:d.I.refetch}),y.refetch()),r.renderPromises&&!1!==(null===n||void 0===n?void 0:n.ssr)&&!(null===n||void 0===n?void 0:n.skip)&&_.loading&&y.setOptions(b(e,n,f)).catch((function(){})),Object.assign(P.current,{options:n}),(r.renderPromises||s.disableNetworkFetches)&&!1===(null===n||void 0===n?void 0:n.ssr)?_=P.current.result={loading:!0,data:void 0,error:void 0,networkStatus:d.I.loading}:((null===n||void 0===n?void 0:n.skip)||"standby"===(null===n||void 0===n?void 0:n.fetchPolicy))&&(_={loading:!1,data:void 0,error:void 0,networkStatus:d.I.ready}),_.errors&&_.errors.length&&(_=(0,i.pi)((0,i.pi)({},_),{error:_.error||new c.c({graphQLErrors:_.errors})}));var O=(0,a.useMemo)((function(){return{refetch:y.refetch.bind(y),fetchMore:y.fetchMore.bind(y),updateQuery:y.updateQuery.bind(y),startPolling:y.startPolling.bind(y),stopPolling:y.stopPolling.bind(y),subscribeToMore:y.subscribeToMore.bind(y)}}),[y]);return(0,i.pi)((0,i.pi)((0,i.pi)({},O),{variables:b(e,n,f).variables,client:s,called:!0,previousData:P.current.previousData}),_)}function b(e,n,t){var r;void 0===n&&(n={});var o=n.skip,a=(n.ssr,n.onCompleted,n.onError,n.displayName,(0,i._T)(n,["skip","ssr","onCompleted","onError","displayName"])),u=(0,i.pi)({query:e},a);return t&&(u=(0,s.J)(t,u)),o?u.fetchPolicy="standby":(!(null===(r=u.context)||void 0===r?void 0:r.renderPromises)||"network-only"!==u.fetchPolicy&&"cache-and-network"!==u.fetchPolicy)&&u.fetchPolicy||(u.fetchPolicy="cache-first"),u.variables||(u.variables={}),u}function y(){var e,n,t=(e=["\nallProducts{\n  id \n  name \n  price \n  description\n  photo {\n    id\n    image{\n      publicUrlTransformed\n    }\n    \n  }\n}\n\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return y=function(){return t},t}var m=(0,t(7521).ZP)(y());function k(){var e=g(m),n=e.data,t=e.error,o=e.loading;return console.log(n,t,o),(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:"This is our product"})})}function _(){return(0,r.jsx)("div",{children:(0,r.jsx)(k,{})})}},8581:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8474)}])}},function(e){e.O(0,[774,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);